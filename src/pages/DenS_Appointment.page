<apex:page standardController="DenS_Appointment__c" extensions="DenS_AppointmentController"  standardStylesheets="true" showHeader="false" sidebar="false"
   recordSetVar="allappoints"  id="apage">
   <!-- TODO
      Checking whether the client exists (js script checking email) after changing the inputField email
      
      
      Later
      getDentists
      Calendar
      Send an email to the dentist after creating an appointment
      
      
      jakby co:
      tu jest kalendarz
      http://www.w3schools.com/howto/howto_css_calendar.asp
      -->
   <apex:includeScript value="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" />
   <script>
      j$ = jQuery.noConflict();
        j$(document).ready(function() {
            j$('[id*=datePick').hide();
            j$('[id*=appointmentDetails').hide();
      });
      
      function renderCalendar () {
      	var li= '#li';
      	j$(li+'01,'+li+'02,'+li+'03,'+li+'04,'+li+'05,'+li+'06').hide();
      	if({!nbOfNullSpaces1}<=2) {
      		if({!nbOfNullSpaces1}==0) {
      			j$(li+'01,'+li+'02,'+li+'03,'+li+'04,'+li+'05,'+li+'06').hide();
      		}
      		else if ({!nbOfNullSpaces1}==1){
      			j$(li+'02,'+li+'03,'+li+'04,'+li+'05,'+li+'06').hide();
      			j$(li+'01').show();
      		}
      		else {	
      			j$(li+'03,'+li+'04,'+li+'05,'+li+'06').hide();
      			j$(li+'01,'+li+'02').show();
      		}
      	}
      	else if ({!nbOfNullSpaces1}<=4) {
      		if({!nbOfNullSpaces1}==3) {
      			j$(li+'04,'+li+'05,'+li+'06').hide(); 
      			j$(li+'01,'+li+'02,'+li+'03').show();
      		}
      		else {
      			j$(li+'05,'+li+'06').hide(); 
      			j$(li+'01,'+li+'02,'+li+'03,'+li+'04').show();
      		}
      	}
      	else {
      		if({!nbOfNullSpaces1}==5) {
      			j$(li+'06').hide();
      			j$(li+'01,'+li+'02,'+li+'03,'+li+'04,'+li+'05').show();
      		}
      		else {
      			j$(li+'01,'+li+'02,'+li+'03,'+li+'04,'+li+'05,'+li+'06').show();
      		}
      	}
      	j$(li+'29,'+li+'30,'+li+'31').show();
      	if({!nbOfNullSpaces2}==1) { 
      		j$(li+'31').hide();
      	}
      	else if({!nbOfNullSpaces2}==3) { 
      		j$(li+'29,'+li+'30,'+li+'31').hide();
      	}
      	
      	//if( {!monthToday}=={!monthDisplay} ) {
        	j$('#li'+{!dayOfTheMonthToday}).addClass('today');
      	//}
      	//else {
      	//	j$('#li'+{!dayOfTheMonthToday}).removeClass('today');
      	//}
      	alert("Hello! I am an alert box!!");
      	return null;
      }
      
      function previousMonth () {
      	  renderCalendar ();
      	  callSubtractMonth();
      	  callDummyFunction ();
      	  renderCalendar ();
      }
      function nextMonth () {
      	  renderCalendar ();
      	  callAddMonth();
      	  callDummyFunction ();
      	  renderCalendar ();
      }
        // jsy add class zeby podswietlac
      function clickSetAnAppointment () {
            j$('[id*=datePick').show();
            j$('[id*=appointmentDetails').show();
            j$('[id*=setAnAppointment').hide();
            renderCalendar();
      }
      
   </script>
   <head>
      <style>
      	/* style na:
      	kalendarz
      	tabele
      	h1...
        
        none or few specific fields
      	  */
         body {
         text-align:center;
         background-image:url('{!$Resource.binary}');  //skyshipE4
         margin: auto;
         }
         .divc {
         width: 500px;
         height: 100px;
         border: 3px solid #73AD21;
         }
         .pblocktable {
         margin: auto;
         text-align:center;
         }
         table.detailList {
         width: 50% !important;
         text-align: center;
         margin: 0 auto;
         font: Verdana;
         font-size: 20px;
         border-spacing: 20px;
         }
         
         
         
         #divcalendar {
         text-align: left;
         width: 400px;
         margin: auto;
         }
         
         ul {list-style-type: none;}
        .month {
            padding: 5px 0px;
            width: 100%;
            background: #1abc9c;
        }
        
        .month ul {
            margin: 0;
            padding: 0;
        }
        
        .month ul li {
            color: white;
            font-size: 24px;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        
        .month .prev {
            float: left;
            padding-top: 10px;
            margin-left: 3px;
            cursor: pointer;
        }
        
        .month .next {
            float: right;
            padding-top: 10px;
            cursor: pointer;
        } 
         
         .weekdays {
        margin: 0;
        padding: 10px 0;
        background-color: #ddd;
        }

        .weekdays li {
        display: inline-block;
        width: 6.6%;
        color: #666;
        text-align: center;
        font-size: 16px;
        }
        
        .days {
            padding: 10px 0;
            background: #eee;
            margin: 0;
        }
        
        .days li {
            list-style-type: none;
            display: inline-block;
            width: 6.6%;
            text-align: center;
            margin-bottom: 5px;
            font-size:16px;
            color: #777;
        }
        
        .active {
            padding: 0px;
            background: #1abc9c;
            color: white !important
        }
        .today {
        	border-bottom: solid red;
        }        

        .invisib {
        	color: #eee !important; 
        }
      </style>
   </head>
   <div>
      <apex:form >
         <h1 id="setAnAppointment" onclick="clickSetAnAppointment();">Set an appointment</h1>
         <div id="datePick">
            <h2>Please click on your appointment date. Days with available terms for a selected dentist are marked in green.</h2>
            <apex:selectList id="selectDentist" styleClass="selDent" value="{!dentistId}" size="1" multiselect="false">
               <apex:selectOptions value="{!dentists}"  />
            </apex:selectList>
              <apex:outputPanel id="calendar">
	            <div id="divcalendar">
	                <div class="month">
	                  <ul>
	                    <li class="prev" onclick="callAddMonth(); renderCalendar (); callDummyFunction ();">❮</li>
	                    <li class="next" onclick="nextMonth ();">❯</li>
	                    <li style="text-align:center; pointer: default;">
	                      {!monthDisplay}<br/>
	                      <span style="font-size:18px; pointer: default">{!yearDisplay}</span>
	                    </li>
	                  </ul>
	                </div>
	            
	                <ul class="weekdays">
	                  <li>Mo</li> <!-- or {!daysOfTheWeek[0]} -->
	                  <li>Tu</li>
	                  <li>We</li>
	                  <li>Th</li>
	                  <li>Fr</li>
	                  <li>Sa</li>
	                  <li>Su</li>
	                </ul>
	                  <ul class="days"> 
	                  <li class="invisib" id="li06">.</li>
	                  <li class="invisib" id="li05">.</li>
	                  <li class="invisib" id="li04">.</li>
		              <li class="invisib" id="li03">.</li>
		              <li class="invisib" id="li02">.</li>
		              <li class="invisib" id="li01">.</li>
	                  <li id="li1">1</li>
	                  <li id="li2">2</li>
	                  <li id="li3">3</li>
	                  <li id="li4">4</li>
	                  <li id="li5">5</li>
	                  <li id="li6">6</li>
	                  <li id="li7">7</li>
	                  <li id="li8">8</li>
	                  <li id="li9">9</li>
	                  <li id="li10">10</li>
	                  <li id="li11">11</li>
	                  <li id="li12">12</li>
	                  <li id="li13">13</li>
	                  <li id="li14">14</li>
	                  <li id="li15">15</li>
	                  <li id="li16">16</li>
	                  <li id="li17">17</li>
	                  <li id="li18">18</li>
	                  <li id="li19">19</li>
	                  <li id="li20">20</li>
	                  <li id="li21">21</li>
	                  <li id="li22">22</li>
	                  <li id="li23">23</li>
	                  <li id="li24">24</li>
	                  <li id="li25">25</li>
	                  <li id="li26">26</li>
	                  <li id="li27">27</li>
	                  <li id="li28">28</li>
	                  <li id="li29">29</li>
	                  <li id="li30">30</li>
	                  <li id="li31">31</li>
	                </ul>
	            </div>
	         </apex:outputPanel>   
         </div>
         <table>
         </table>
         <apex:pageBlock id="appointmentDetails">
            <apex:pageBlockSection title="My Content Section" columns="2" >
               <apex:inputField value="{!appointment.Date__c}"  showDatePicker="true"> </apex:inputField>
               <apex:inputText value="{!client.First_name__c}"/>
               <apex:selectList styleClass="sellist" value="{!pomS}" size="1" Label="Start time">
                  <apex:selectOptions value="{!WorkingHours}"/>
               </apex:selectList>
               <apex:inputText value="{!client.Second_name__c}"/>
               <apex:selectList styleClass="sellist" value="{!pomE}" size="1" Label="End time">
                  <apex:selectOptions value="{!WorkingHours}"/>
               </apex:selectList>
               <apex:inputField value="{!client.Email__c}"/>
               <apex:inputTextarea value="{!appointment.Description__c}" />
               <apex:inputField value="{!client.Phone_number__c}"/>
               <apex:outputPanel id="tPanel">
                 <apex:pageMessages />
               </apex:outputPanel>
               <apex:commandLink styleClass="saveB" action="{!save}" style="text-decoration: none;"
                  reRender="tPanel">
                  <apex:commandButton id="saveB" value="Set appointment"/>
               </apex:commandLink>
            </apex:pageBlockSection>
         </apex:pageBlock>
         <apex:actionFunction name="callCheckClientExists" action="{!checkClientExists}" rerender=""/>
         <apex:commandLink value="costam" action="{!checkClientExists}" reRender="tPanel"/>
         <apex:actionFunction name="tmm" action="{!tm}" rerender="tPanel" />
         <apex:actionFunction action="{!addMonth}"  name="callAddMonth" rerender="calendar, tPanel" />
         <apex:actionFunction action="{!subtractMonth}"  name="callSubtractMonth" rerender="calendar, tPanel" />
         <apex:actionFunction action="{!doNothing}"  name="callDummyFunction" rerender="tPanel" />
      </apex:form>
   </div>
</apex:page>